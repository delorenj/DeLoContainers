version: "3.5"
services:
  nats:
    image: nats
    ports:
      - "8222:8222"
    command: "--cluster_name NATS --cluster nats://0.0.0.0:6222 --http_port 8222"
    networks:
      - "default"
    labels:
      - "traefik.enable=true"
      - "traefik.http.routers.nats.rule=Host(`nats.localhost`)"
      - "traefik.http.routers.nats.entrypoints=web"
      - "traefik.http.services.nats.loadbalancer.server.port=8222"

networks:
  default:
    external: true
    name: "proxy"
